View(step_counts)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
steps[, curr_day] <- 0
curr_day <- curr_day + 1
}
while(as.numeric(difftime(last_day, curr_day)) != -1){
steps_counts[, curr_day] <- 0
curr_day <- curr_day + 1
}
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, curr_day] <- 0
curr_day <- curr_day + 1
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, curr_day] <- 0
curr_day <- curr_day + 1
}
View(step_counts)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, curr_day] <- c(0)
curr_day <- curr_day + 1
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, curr_day] <-
curr_day <- curr_day + 1
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, curr_day] <- 0
curr_day <- curr_day + 1
}
View(step_counts)
step_counts[, as.Character(curr_day)] <- 0
step_counts[, as.character(curr_day)] <- 0
View(step_counts)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
View(step_counts)
step_counts$remove_me <- NULL
View(step_counts)
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- step_counts[1, date] + data[i, 5]
}
View(step_counts)
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
#USER CONTROLLED OPTIONS ----
num_days <- 4
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
step_counts$remove_me <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO " + str(ncol(step_counts)))
num_days <- ncol(step_counts)
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
#USER CONTROLLED OPTIONS ----
num_days <- 20
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
step_counts$remove_me <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO " + str(ncol(step_counts)))
num_days <- ncol(step_counts)
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO " + toString(ncol(step_counts)))
num_days <- ncol(step_counts)
}
#USER CONTROLLED OPTIONS ----
num_days <- 20
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO " + toString(ncol(step_counts)))
num_days <- ncol(step_counts)
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO " + ncol(step_counts))
num_days <- ncol(step_counts)
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
step_counts$remove_me <- NULL
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
curr_index <- ncol(step_counts) - num_days + 1
#USER CONTROLLED OPTIONS ----
num_days <- 7
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
step_counts$remove_me <- NULL
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
curr_index <- ncol(step_counts) - num_days + 1
print(rowSums(step_counts[1:5]))
print(rowSums(step_counts[1:2]))
print(rowSums(step_counts[1:3]))
step_counts <- data.frame(curr_day - 1 = 0)
step_counts <- data.frame()
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts <- step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts <- step_counts[, as.character(curr_day - 1)] <- 0
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
View(step_counts)
step_counts$remove_me <- NULL
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, date-1]
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, as.numeric(as.Date(date-1))]
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, as.numeric(as.Date(date)-1)]
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, as.numeric(as.Date(date)-1)]
}
print(step_counts[1, as.numeric(as.Date(date)-1)])
print(step_counts[1, as.Date(date)-1])
print(as.Date(date)-1)
print(step_counts[1, toString(as.Date(date)-1)])
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, toString(as.Date(date)-1)]
}
View(step_counts)
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] #- step_counts[1, toString(as.Date(date)-1)]
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, toString(as.Date(date)-1)]
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, toString(as.Date(date)-1)]
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
print(1:10)
print(1:10:-1)
print(10:1:-1)
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5] - step_counts[1, toString(as.Date(date)-1)]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
step_counts[, 1] <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
print(rowSums(step_counts[,curr_index:curr_index + num_days - 1]))
print(step_counts[,curr_index:curr_index + num_days - 1])
curr_index <- ncol(step_counts) - num_days + 1
start_index <- curr_index
max <- 0
for(i in curr_index:1){
print(step_counts[,curr_index:curr_index + num_days - 1])
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
print(step_counts[,i:(i + num_days - 1)])
}
for(i in (ncol(step_counts) - num_days + 1):1){
print(sum(step_counts[,i:(i + num_days - 1)]))
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
max <- possible_max
start_index <- i
}
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
#max <- possible_max
start_index <- i
}
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
max <- possible_max
start_index <- i
}
}
#USER CONTROLLED OPTIONS ----
num_days <- 7
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
#FIND DAY RANGE ----
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
step_counts[, 1] <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
max <- possible_max
start_index <- i
}
}
valid_days <- c()
print(step_counts[1,1])
print(step_counts[0,1])
print(colnames(step_counts))
#USER CONTROLLED OPTIONS ----
num_days <- 7
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
#FIND DAY RANGE ----
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
step_counts[, 1] <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
max <- possible_max
start_index <- i
}
}
valid_days <- c()
for(i in 0:6){
valid_days <- c(valid_days, colnames(step_counts)[start_index + i])
}
print(valid_days)
step_counts <- step_counts(valid_days)
step_counts <- step_counts[valid_days]
#USER CONTROLLED OPTIONS ----
num_days <- 7
#READ IN DATA ----
wd <- "C:/Users/User/Desktop/PNC_Lab/activPAL-bout-detection"
setwd(wd)
data_path <- "sample_data/SA009-SA009-AP840032 11Apr19 12-00am for 12d 16h 22m-VANE-PB08090417-Events.csv"
data <- activpalProcessing::activpal.file.reader(data_path)
#REDUCE TO DAY RANGE ----
curr_day <- as.Date(substr(data[1, 1], 1, 10))
last_day <- as.Date(substr(data[nrow(data), 1], 1, 10))
step_counts <- data.frame("remove_me" = 0)
step_counts[, as.character(curr_day - 1)] <- 0
step_counts$remove_me <- NULL
while(as.numeric(difftime(last_day, curr_day)) != -1){
step_counts[, as.character(curr_day)] <- 0
curr_day <- curr_day + 1
}
for(i in 1:nrow(data)){
date <- substr(data[i, 1], 1, 10)
step_counts[1, date] <- data[i, 5]
}
for(i in ncol(step_counts):2){
step_counts[1, i] <- step_counts[1, i] - step_counts[1, i-1]
}
step_counts[, 1] <- NULL
if(ncol(step_counts) < num_days){
print("USER HAS SPECIFIED MORE DAYS THAN ARE AVAILABLE.  REDUCING num_days TO:")
print(ncol(step_counts))
num_days <- ncol(step_counts)
}
start_index <- 0
max <- 0
for(i in (ncol(step_counts) - num_days + 1):1){
possible_max <- sum(step_counts[,i:(i + num_days - 1)])
if(possible_max > max){
max <- possible_max
start_index <- i
}
}
valid_days <- c()
for(i in 0:6){
valid_days <- c(valid_days, colnames(step_counts)[start_index + i])
}
step_counts <- step_counts[valid_days]
days_to_remove <- c()
for(i in 1:nrow(data)){
if(!(substr(data[i, 1], 1, 10) %in% valid_days)){
days_to_remove <- c(days_to_remove, i)
}
}
data <- data[-c(days_to_remove),]
